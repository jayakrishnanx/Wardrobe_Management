{% extends 'supplier/base_dashboard.html' %}

{% block title %}Manage Accessories{% endblock %}

{% block content %}
<div class="page-header fade-in d-flex justify-content-between align-items-center flex-wrap gap-3">
    <div>
        <h2 class="page-title">ðŸ“¦ My Products</h2>
        <p class="page-subtitle">Manage your inventory and stock levels.</p>
    </div>
    <a href="{% url 'add_accessories' %}" class="btn btn-primary">
        + Add New Product
    </a>
</div>

<div class="items-grid fade-in delay-1">
    {% for a in accessories %}
    <div class="item-card">
        <div class="item-header-image-row">
            {% if a.image %}
            <div class="w-120 h-120 flex-shrink-0">
                <img src="{{ a.image.url }}" class="w-100 h-100 object-fit-cover">
            </div>
            {% else %}
            <div class="w-120 h-120 bg-secondary d-flex align-items-center justify-content-center text-muted">
                No Image
            </div>
            {% endif %}
            
            <div class="p-3 flex-grow-1 overflow-hidden">
                <h3 class="item-title text-truncate">{{ a.name }}</h3>
                <span class="badge-category">
                    {{ a.category }}
                </span>
                <p class="item-price">â‚¹{{ a.price }}</p>
            </div>
        </div>
        
        <div class="p-3 bg-card">
            <form method="post" action="{% url 'update_stock' a.id %}" class="d-flex align-items-center gap-2 mb-3">
                {% csrf_token %}
                <label class="small text-muted">Stock:</label>
                <input type="number" name="stock" value="{{ a.stock }}" min="0" class="form-control form-control-sm">
                <button type="submit" class="btn btn-outline py-1 px-2 small">Update</button>
            </form>
            
            <div class="d-flex gap-2 border-top pt-3">
                <a href="{% url 'edit_accessory' a.id %}" class="btn btn-outline flex-grow-1 text-center">Edit</a>
                
                <form method="post" action="{% url 'delete_accessory' a.id %}" class="flex-grow-1" onsubmit="return confirm('Delete this accessory?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-soft-danger w-100">Delete</button>
                </form>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="empty-state-card">
        <p class="text-muted mb-4 fs-5">No accessories added yet.</p>
        <a href="{% url 'add_accessories' %}" class="btn btn-primary">Add Your First Product</a>
    </div>
    {% endfor %}
</div>
{% endblock %}